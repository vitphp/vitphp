<!DOCTYPE html><html lang="zh"><head>    <meta charset="UTF-8">    <title>{$system_site.title|default=""}</title>    <meta name="keywords" content="{$system_site.keywords|default=''}" />    <meta name="description" content="{$system_site.description|default=''}"/>    <meta name="renderer" content="webkit">    <meta name="format-detection" content="telephone=no">    <meta name="apple-mobile-web-app-capable" content="yes">    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    <meta name="apple-mobile-web-app-status-bar-style" content="black">    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">    <link rel="stylesheet" href="__ROOT__/static/plugs/layui/css/layui.css">    <link rel="stylesheet" href="__ROOT__/static/plugs/vit/viticon/iconfont.css">    <link rel="stylesheet" href="__ROOT__/static/theme/css/login.css?v=20211010" media="all">    <link rel="stylesheet" href="__ROOT__/static/theme/css/vitstyle.css?v=20211010" media="all">    <script src="__ROOT__/static/plugs/jquery/jquery.min.js"></script>    <script src="__ROOT__/static/plugs/layui/layui.js"></script></head><body><style>    @media screen and (max-width: 960px) {        .layui-col-xs7{            display: none;            float: none;            width: 0;        }        .layui-col-xs5{            width: 100%;        }    }</style><div style="height: 100%;">    <div class="login-body">        <div class="login-page">            <div class="layui-logo" lay-href="">                {if $system_site}                <img class="logo" src="{$system_site.admin_logo|default='__ROOT__/static/theme/images/minilogo.png'}"/>{else}                <img class="logo" src="__ROOT__/static/theme/images/minilogo.png" /> {/if}                <span class="logo-size">{$system_site.name|default="VitPhp"}</span></div>        </div>        <div class="login-page-boot">            <div class="layui-col-xs12">                <div class="layui-col-xs7">                    <img style="height: 500px;" class="layui-col-xs12" src="__ROOT__/static/theme/images/login_head.jpg?v=9">                </div>                <div class="layui-col-xs5">                    <div class="margin46">                        <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">                            <ul class="layui-tab-title text-center">                                {if getSetting('wx_login')==2}<li class="layui-this">扫码登录</li>{/if}                                <li {if getSetting('wx_login')!=2}class="layui-this"{/if}>密码登录</li>                                {if getSetting('is_reg')==2}<li>用户注册</li>{/if}                            </ul>                            <div class="layui-tab-content">                                {if getSetting('wx_login')==2}                                <div class="layui-tab-item layui-show text-center">                                    <img style="width: 280px" id="getqrcode">                                    <div id="scan_msg" style="color:red;"></div>                                </div>                                {/if}                                <div class="layui-tab-item {if getSetting('wx_login')!=2}layui-show{/if}">                                <form method="post" class="layui-form" action="{:url('dologin')}">                                    <input name="username" placeholder="用户名" type="text" lay-verify="required" class="layui-input" value="">                                    <hr class="hr15">                                    <input name="password" lay-verify="required" placeholder="密码" type="password" class="layui-input" value="">                                    <hr class="hr15">                                    <input name="verify" lay-verify="required" placeholder="验证码" type="text" autocomplete="off" class="layui-input" value="">                                    <hr class="hr15" >                                    <img class="captcha-fresh" src="{:captcha_src()}" style="width: 150px;border: 1px solid;border-radius: 3px; border-color: rgb(220, 222, 224);" >                                    <span class="captcha-fresh" style="text-decoration:underline ">点击验证码刷新</span>                                    <hr class="hr15" >                                    <input value="登录" class="layui-btn layui-btn-normal" lay-submit lay-filter="login" style="width:100%;" type="submit">                                </form>                                </div>                                {if getSetting('is_reg')==2}                                <div class="layui-tab-item">                                    <form method="post" class="layui-form" action="{:url('reg_save')}">                                        <input name="username" placeholder="用户名" type="text" lay-verify="required" class="layui-input" value="">                                        <hr class="hr15">                                        <input name="password" lay-verify="required" placeholder="密码" type="password" class="layui-input" value="">                                        <hr class="hr15">                                        <input name="repassword" lay-verify="required" placeholder="重复密码" type="password" class="layui-input" value="">                                        <hr class="hr15">                                        <input name="verify" lay-verify="required" placeholder="验证码" type="text" class="layui-input" value="">                                        <hr class="hr15" >                                        <img class="captcha-fresh" src="{:captcha_src()}" style="width: 150px;border: 1px solid;border-radius: 3px; border-color: rgb(220, 222, 224);" >                                        <span class="captcha-fresh" style="text-decoration:underline ">点击验证码刷新</span>                                        <hr class="hr15" >                                        <input value="注册" class="layui-btn layui-btn-normal" lay-submit lay-filter="login" style="width:100%;" type="submit">                                    </form>                                </div>                                {/if}                            </div>                        </div>                        {if $xieyi}                        <div style="color: #919499;text-align: center;">                            <div>                                <input type="checkbox" id="Agreement" name="Agreement" value="" checked="checked">                                <span>已阅读并同意</span> <a style="color: #919499;" target="_blank" href="xieyi" class="aBtn">《用户使用协议》</a>                            </div>                        </div>                        {/if}                    </div>                </div>            </div>        </div>        <div class="login-foot" style="color: #000;font-size: 16px;">            <div>{$system_site.foot_top|default=""|raw}</div>            <div>{$system_site.foot_bottom|default=""|raw}                <span class="padding-left">                {if $system_site}{if $system_site.icpbeian}备案号：<a href="https://beian.miit.gov.cn/" target="_blank">{$system_site.icpbeian|default=""}</a>{/if}{/if}        </span>            </div>        </div>    </div></div><script src="__ROOT__/static/plugs/jquery/jquery.min.js"></script><script src="__ROOT__/static/plugs/layui/layui.js"></script><script>    $(function () {        var form = layui.form;        $('.captcha-fresh').click(function (ev) {            $("img.captcha-fresh").attr('src','{:captcha_src()}?t='+(new Date()).getTime())        });        let qeStatus = true;        form.on('submit(login)', function (data) {            var url = $(data.form).attr('action');            if(!qeStatus) return false;            qeStatus = false;            $.ajax({                type: "POST",                url: url,                data: data.field,                dataType: "json",                success: function (data) {                    qeStatus = true;                    layui.layer.msg(data.msg,                        {                            shade: [0.3, '#393D49'],                            icon: data.code,                            time: data.wait*1000,                            shadeClose:true                        },                        function () {                            if (data.code){                                location.href = data.url;                            }else{                                $("img.captcha-fresh").attr('src','/captcha.html?t='+(new Date()).getTime())                            }                        }                    );                },                error: function(e){                    qeStatus = true;                    layui.layer.msg("网络错误，status = "+xmr.status,{shade: [0.3, '#393D49'],icon: data.code,time: 3000,shadeClose:true});                }            });            return false;        });    })    {if getSetting('wx_login')==2}    qrcode();    function qrcode() {        $.post("{:url('/index/login/createQrcode')}",{},function(data){            data = JSON.parse(data);            if(data.code == 200){                $("#getqrcode").attr('src',data.msg);                console.log(data.msg);                Intervals = setInterval(function(){                    time_query(data.sid);                },2000);            }else{                console.log('生成二维码失败');            }        });    }    function time_query(sid) {        $.ajax({            url:"{:url('/index/login/querylogin')}",            type:'post',            data:{                sid:sid,            },            dataType:'json',            success:function(data){                if(data.code == 200){                    layer.msg(data.msg);                    setTimeout('location.href="'+data.url+'";',1000);                }else{                    $("#scan_msg").html(data.msg);                }            },error:function(res){                console.log(res);            }        });    }    {/if}    var _hmt = _hmt || [];    (function() {      var hm = document.createElement("script");      hm.src = "https://hm.baidu.com/hm.js?780f46f31a1d12cffef148d074164072";      var s = document.getElementsByTagName("script")[0];       s.parentNode.insertBefore(hm, s);    })();</script></body></html>